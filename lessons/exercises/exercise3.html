<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 3: Responsive Semantic Layout - HTML Master</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Exercise Page Styles (shared look with other exercises) */
        .exercise-container{max-width:1200px;margin:100px auto 50px;padding:0 20px}
        .exercise-header{background:linear-gradient(135deg,#ff512f 0%,#dd2476 100%);color:#fff;border-radius:12px;padding:40px;margin-bottom:40px;box-shadow:0 10px 30px rgba(0,0,0,.2)}
        .exercise-badge{display:inline-block;padding:8px 20px;background:rgba(255,255,255,.2);border-radius:20px;font-size:.9rem;margin-bottom:15px}
        .exercise-title{font-size:2.5rem;margin:10px 0 20px}
        .exercise-meta{display:flex;gap:30px;margin-top:20px;flex-wrap:wrap}
        .meta-item{display:flex;align-items:center;gap:10px}
        .meta-item i{font-size:1.2rem}
        .exercise-content{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:40px}
        @media (max-width:992px){.exercise-content{grid-template-columns:1fr}}
        .instructions-card{background:#fff;border-radius:12px;padding:30px;box-shadow:0 5px 15px rgba(0,0,0,.1)}
        .instructions-card h3{color:#2c3e50;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #e74c3c;display:flex;align-items:center;gap:10px}
        .requirements-list{list-style:none;margin:20px 0}
        .requirements-list li{padding:10px 0;border-bottom:1px solid #eee;display:flex;align-items:center;gap:10px}
        .requirements-list li:last-child{border-bottom:none}
        .requirements-list i{color:#2ecc71}
        .example-output{background:#f8f9fa;padding:20px;border-radius:8px;border-left:4px solid #e74c3c;margin:20px 0}
        .exercise-editor{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1)}
        .editor-header{background:#2c3e50;color:#fff;padding:15px 20px;display:flex;justify-content:space-between;align-items:center}
        .editor-header h3{margin:0;font-size:1.1rem}
        .editor-actions{display:flex;gap:10px}
        .editor-action-btn{padding:8px 15px;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;display:flex;align-items:center;gap:5px;transition:all .3s}
        .editor-action-btn.run{background:#2ecc71;color:#fff}
        .editor-action-btn.check{background:#3498db;color:#fff}
        .editor-action-btn.reset{background:#e67e22;color:#fff}
        .editor-action-btn.solution{background:#9b59b6;color:#fff}
        .editor-action-btn:hover{transform:translateY(-2px)}
        .code-editor{width:100%;height:320px;border:none;padding:20px;font-family:'Consolas','Monaco',monospace;font-size:14px;resize:vertical}
        .output-section{padding:20px;border-top:1px solid #eee}
        .output-section h4{margin:0 0 10px;color:#2c3e50;display:flex;align-items:center;gap:8px}
        .output-frame{width:100%;height:220px;border:1px solid #ddd;border-radius:8px;background:#fff}
        .feedback-message{margin-top:20px;padding:15px;border-radius:8px;display:none}
        .feedback-message.success{background:#d4edda;color:#155724;border-left:4px solid #28a745}
        .feedback-message.warning{background:#fff3cd;color:#856404;border-left:4px solid #ffc107}
        .success-message{background:#d1ecf1;color:#0c5460;padding:20px;border-radius:8px;margin-top:20px;display:none;border-left:4px solid #17a2b8}
        .navigation-buttons{display:flex;justify-content:space-between;gap:15px;margin-top:25px;flex-wrap:wrap}
        .nav-btn{padding:12px 20px;border-radius:8px;text-decoration:none;display:inline-flex;align-items:center;gap:10px;font-weight:600;transition:all .3s}
        .nav-btn.back{background:#34495e;color:#fff}
        .nav-btn.next{background:#e74c3c;color:#fff;opacity:1}
        .nav-btn:hover{transform:translateY(-2px)}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-code"></i>
                <span>HTML Master</span>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html#exercises"><i class="fas fa-dumbbell"></i> Back to Exercises</a></li>
                <li><a href="../arcade.html"><i class="fas fa-gamepad"></i> HTML Arcade</a></li>
            </ul>
        </div>
    </nav>

    <div class="exercise-container">
        <div class="exercise-header">
            <div class="exercise-badge">Hard • 30 min • 50 points</div>
            <h1 class="exercise-title">Exercise 3: Responsive Semantic Layout</h1>
            <p>Build a clean semantic layout (header/nav/main/aside/footer) and make it responsive with a simple media query.</p>
            <div class="exercise-meta">
                <div class="meta-item"><i class="fas fa-layer-group"></i> Semantic HTML</div>
                <div class="meta-item"><i class="fas fa-mobile-alt"></i> Responsive</div>
                <div class="meta-item"><i class="fas fa-universal-access"></i> Accessible</div>
            </div>
        </div>

        <div class="exercise-content">
            <div class="instructions-card">
                <h3><i class="fas fa-list-check"></i> Exercise Instructions</h3>

                <p><strong>Your task:</strong> Create a page layout using <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code>, two <code>&lt;section&gt;</code>s, an <code>&lt;aside&gt;</code>, and a <code>&lt;footer&gt;</code>.</p>

                <ul class="requirements-list">
                    <li><i class="fas fa-check-circle"></i> Include <code>&lt;meta name="viewport" ...&gt;</code></li>
                    <li><i class="fas fa-check-circle"></i> Use <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code>, <code>&lt;aside&gt;</code>, <code>&lt;footer&gt;</code></li>
                    <li><i class="fas fa-check-circle"></i> Nav contains at least 3 links</li>
                    <li><i class="fas fa-check-circle"></i> Main contains at least 2 sections</li>
                    <li><i class="fas fa-check-circle"></i> Include at least one image with <code>alt</code></li>
                    <li><i class="fas fa-check-circle"></i> Add a media query (e.g. <code>@media (max-width: 768px)</code>)</li>
                </ul>

                <div class="example-output">
                    <strong>Hint:</strong> Keep it simple: a two-column layout that becomes one column on small screens.
                </div>

                <div class="navigation-buttons">
                    <a class="nav-btn back" href="exercise2.html"><i class="fas fa-arrow-left"></i> Previous: Exercise 2</a>
                    <a class="nav-btn next" id="finishBtn" href="../index.html#certificate"><i class="fas fa-award"></i> Finish & Certificate</a>
                </div>
            </div>

            <div class="exercise-editor">
                <div class="editor-header">
                    <h3><i class="fas fa-code"></i> Code Editor</h3>
                    <div class="editor-actions">
                        <button class="editor-action-btn run" onclick="runCode()"><i class="fas fa-play"></i> Run</button>
                        <button class="editor-action-btn check" onclick="checkSolution()"><i class="fas fa-check"></i> Check</button>
                        <button class="editor-action-btn reset" onclick="resetCode()"><i class="fas fa-undo"></i> Reset</button>
                        <button class="editor-action-btn solution" onclick="showSolution()"><i class="fas fa-lightbulb"></i> Solution</button>
                    </div>
                </div>

                <textarea id="exerciseCode" class="code-editor" spellcheck="false"></textarea>

                <div class="output-section">
                    <h4><i class="fas fa-desktop"></i> Output</h4>
                    <iframe id="outputFrame" class="output-frame"></iframe>

                    <div id="feedbackMessage" class="feedback-message"></div>

                    <div id="successMessage" class="success-message">
                        <h4><i class="fas fa-check-circle"></i> Awesome!</h4>
                        <p>You built a semantic, responsive layout. You're ready for the certificate.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer" style="margin-top:40px;">
        <div class="footer-bottom">
            <p>&copy; 2024 HTML Master. Made with ❤️ for students.</p>
        </div>
    </footer>

    <script>
        const starterCode = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Layout</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; }
    header, footer { padding: 16px; background: #222; color: white; }
    nav a { color: white; margin-right: 12px; text-decoration: none; }
    .layout { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; padding: 16px; }
    main, aside { background: #f4f4f4; padding: 16px; border-radius: 8px; }
    img { max-width: 100%; height: auto; border-radius: 8px; }
    @media (max-width: 768px) {
      .layout { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <!-- Build your semantic layout here -->
</body>
</html>`;

        const solutionCode = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Layout</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; }
    header, footer { padding: 16px; background: #222; color: white; }
    nav a { color: white; margin-right: 12px; text-decoration: none; }
    .layout { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; padding: 16px; }
    main, aside { background: #f4f4f4; padding: 16px; border-radius: 8px; }
    section { background: #fff; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
    img { max-width: 100%; height: auto; border-radius: 8px; }
    @media (max-width: 768px) {
      .layout { grid-template-columns: 1fr; }
      header { text-align: center; }
    }
  </style>
</head>
<body>
  <header>
    <h1>My Semantic Site</h1>
    <nav>
      <a href="#home">Home</a>
      <a href="#blog">Blog</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <div class="layout">
    <main>
      <section id="home">
        <h2>Welcome</h2>
        <p>This layout uses semantic HTML elements.</p>
        <img src="https://via.placeholder.com/800x300" alt="Placeholder banner image" />
      </section>
      <section id="blog">
        <h2>Latest Post</h2>
        <p>On mobile, the layout becomes a single column.</p>
      </section>
    </main>

    <aside>
      <h2>About</h2>
      <p>Side content goes here.</p>
    </aside>
  </div>

  <footer>
    <p>&copy; 2024 My Semantic Site</p>
  </footer>
</body>
</html>`;

        function resetCode(){
            document.getElementById('exerciseCode').value = starterCode;
            hideFeedback();
        }

        function showSolution(){
            if (confirm('View the example solution? This will replace your current code.')) {
                document.getElementById('exerciseCode').value = solutionCode;
                hideFeedback();
            }
        }

        function runCode(){
            const iframe = document.getElementById('outputFrame');
            const code = document.getElementById('exerciseCode').value;
            const doc = iframe.contentDocument || iframe.contentWindow.document;
            doc.open();
            doc.write(code);
            doc.close();
        }

        function checkSolution(){
            const userCode = document.getElementById('exerciseCode').value;
            const code = userCode.toLowerCase();
            const feedback = document.getElementById('feedbackMessage');
            const successMsg = document.getElementById('successMessage');

            const errors = [];
            const warnings = [];
            let score = 0;
            const maxScore = 14;

            if (code.includes('name="viewport"') && code.includes('width=device-width')) score += 2;
            else errors.push('Missing or incorrect meta viewport tag');

            const semantic = ['<header', '<nav', '<main', '<aside', '<footer'];
            for (const t of semantic) {
                if (code.includes(t)) score += 2;
                else errors.push(`Missing semantic element: ${t.replace('<','<')}&gt;`);
            }

            const linkCount = (code.match(/<a\s+/g) || []).length;
            if (linkCount >= 3) score += 2;
            else errors.push(`Nav should have at least 3 links (found ${linkCount})`);

            const sectionCount = (code.match(/<section\b/g) || []).length;
            if (sectionCount >= 2) score += 2;
            else errors.push(`Main should include at least 2 sections (found ${sectionCount})`);

            const hasImg = code.includes('<img');
            const hasAlt = /<img[^>]*\salt=/.test(code);
            if (hasImg && hasAlt) score += 2;
            else warnings.push('Include an image with a proper alt attribute');

            const hasMediaQuery = code.includes('@media') && (code.includes('max-width') || code.includes('min-width'));
            if (hasMediaQuery) score += 2;
            else warnings.push('Add a media query to make the layout responsive');

            if (errors.length === 0) {
                if (warnings.length === 0) {
                    feedback.className = 'feedback-message success';
                    feedback.innerHTML = `<h4><i class="fas fa-check-circle"></i> Perfect!</h4>
                        <p>Your layout meets all requirements. Score: ${score}/${maxScore}</p>`;
                    setTimeout(() => {
                        successMsg.style.display = 'block';
                        saveProgress();
                    }, 700);
                } else {
                    feedback.className = 'feedback-message warning';
                    feedback.innerHTML = `<h4><i class="fas fa-check-circle"></i> Great start!</h4>
                        <p>Score: ${score}/${maxScore}</p>
                        <ul>${warnings.map(w => `<li>${w}</li>`).join('')}</ul>`;
                }
            } else {
                feedback.className = 'feedback-message warning';
                feedback.innerHTML = `<h4><i class="fas fa-exclamation-triangle"></i> Needs improvement</h4>
                    <p>Score: ${score}/${maxScore}</p>
                    <ul>${errors.map(e => `<li>${e}</li>`).join('')}</ul>
                    ${warnings.length ? `<p><strong>Suggestions:</strong></p><ul>${warnings.map(w => `<li>${w}</li>`).join('')}</ul>` : ''}`;
            }

            feedback.style.display = 'block';
            feedback.scrollIntoView({behavior:'smooth', block:'nearest'});
        }

        function hideFeedback(){
            document.getElementById('feedbackMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
        }

        function saveProgress(){
            localStorage.setItem('exercise3_completed','true');
            localStorage.setItem('exercise3_score','50');
            let totalScore = parseInt(localStorage.getItem('total_score') || '0', 10);
            if (!localStorage.getItem('exercise3_score_added')) {
                totalScore += 50;
                localStorage.setItem('total_score', totalScore.toString());
                localStorage.setItem('exercise3_score_added','true');
            }
        }

        document.addEventListener('DOMContentLoaded', function(){
            const savedCode = localStorage.getItem('exercise3_code');
            document.getElementById('exerciseCode').value = savedCode || starterCode;
            runCode();

            if (localStorage.getItem('exercise3_completed') === 'true') {
                document.getElementById('successMessage').style.display = 'block';
            }

            const codeEditor = document.getElementById('exerciseCode');
            codeEditor.addEventListener('input', function(){
                localStorage.setItem('exercise3_code', this.value);
            });

            codeEditor.addEventListener('keydown', function(e){
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = this.selectionStart;
                    const end = this.selectionEnd;
                    this.value = this.value.substring(0, start) + '    ' + this.value.substring(end);
                    this.selectionStart = this.selectionEnd = start + 4;
                }
            });
        });
    </script>
</body>
</html>
